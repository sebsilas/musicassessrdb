service: musicassessr-backend
frameworkVersion: "3"
useDotenv: true

provider:
  name: aws
  region: ${opt:region, 'us-east-1'}
  runtime: nodejs18.x
  architecture: arm64
  deploymentMethod: direct
  environment: ${file(serverless/environment.yaml)}
  iam:
    role:
      statements:
        - Effect: "Allow"
          Action: "*"
          Resource: "*"
  httpApi:
    id: "kuqchtwsfb"
  tracing:
    apiGateway: false
    lambda: false


custom:
  deploymentBucket:
    accelerate: true
    blockPublicAccess: true

package:
  individually: true
  patterns:
    - "!./**"
    - nodejs-services/src/dist/**
    - nodejs-services/src/node_modules/**


functions:
  - ${file(serverless/functions/api-nodejs.yaml)}